<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Fullstack Fest 2016 Notes</title>

    <link href="/stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/all.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/code.css" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
  </head>

  <body class="fullstackfest2016 fullstackfest2016_index">
    <article>
      <h1>Fullstack Fest 2016</h1>

<p><em>September 5, 2016, Barcelona, Spain</em></p>

<ol>
<li><a href="#computing-the-first-100-years">Computing: the First 100 Years</a></li>
<li><a href="#shopify-in-multilple-datacenters">Shopify in Multiple Datacenters</a></li>
<li><a href="#architectural-patterns-of-resilient-distributed-systems">Architectural Patterns of Resilient Distributed Systems</a></li>
</ol>

<p><a name="computing-the-first-100-years"></a></p>

<h2>Computing: the First 100 Years</h2>

<p><em><a href="#">Joe Armstrong</a></em></p>

<p>A nice talk on the history of computers.</p>

<h3>Computers</h3>

<ul>
<li>1975: Cray 1 - the most advanced supercomputer back in 1975</li>
<li>1975: Vax 11/780 = 0.00625 x Cray 1</li>
<li>2014: iPhone 6 = 256 x Cray 1</li>
<li>2015: Raspberry Pi 3 = 15 x Cray 1</li>
<li>2016: Nvidia Tesla P100 = 66250 x Cray 1</li>
<li>ca. 5 million years ago: Human Brain = 2.85E8 x Cray 1</li>
</ul>

<h3>Hardware from 1948-2016</h3>

<ul>
<li>TFlops CPU</li>
<li>TBytes+ memory</li>
<li>Connectivity is limited by laws of physics (LiFi)</li>
<li>Consists of billions of small communicating deivces</li>
</ul>

<h3>Dangers</h3>

<ol>
<li>Saving history - perisisting data for decades and centuries is a problem

<ul>
<li>Storage</li>
<li>Naming</li>
</ul></li>
</ol>

<ul>
<li><a href="https://ipfs.io/">IPFS</a></li>
<li><a href="https://en.wikipedia.org/wiki/Kademlia">Kademlia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Self-certifying_File_System">Self-certifying File System</a>

<ol>
<li>Computational power</li>
</ol></li>
<li>A computer built into a solar panel.</li>
</ul>

<p><a name="shopify-in-multilple-datacenters"></a></p>

<h2>Shopify in Multiple Datacenters</h2>

<p><em><a href="https://twitter.com/sirupsen">Simon Eskildsen</a></em></p>

<p>The Flash Sale Problem &ndash; 3-4x req/s peaks.</p>

<h3>Single Tenant vs Multi Tenant solutions</h3>

<p>Single Tenant:
+ Isolation
+ Scalability</p>

<p>Multi Tenant:
+ Capacity
+ Utilization
+ Good for flash sales
+ Cheaper</p>

<h3>The Golden Middle?</h3>

<ul>
<li>First steps

<ul>
<li>Vertical scaling</li>
<li>Performance optimizations</li>
<li>Caching</li>
<li>Throttling</li>
</ul></li>
<li>Database sharding</li>
<li><p>Resilience</p>

<blockquote>
<p>errors ~ surface area</p>

<p>platform surface area = time * scale</p>
</blockquote>

<p><strong>Resilience Maturity Pyramid</strong></p>

<p><img alt="Resilience pyramid" src="/images/resilience-pyramid.jpg" /></p></li>
<li><p>Multiple DCs</p>

<ul>
<li>Zero-downtime migrations.</li>
</ul></li>
<li><p>Pods</p></li>
</ul>

<p><strong>Pod</strong> &ndash; an isolated group of shops (DB only):
  - Workers
  - KV store
  - Cache
  - Shard</p>

<p>Goal is to run pods in multiple DCs.</p>

<ul>
<li>Pods have all benefits of multi tenant approach while being isolated (within a single pod) and scalable.</li>
<li>Flash sales: leveraging platform size to steal capacity from other pods when required.
<em>&ldquo;Borrowing&rdquo; workers</em></li>
</ul>

<p>API routing and load-balancing via <a href="https://openresty.org/en/">openresty</a>:</p>

<blockquote>
<p>openresty = nginx + lua + ❤️</p>
</blockquote>

<p><strong>Rules</strong>
  1. Any request must be annotated with a pod or shop.
  2. Any request can only touch one pod.</p>

<h4>Shitlist-driven development</h4>

<p>Instead of deprecating certain API method whitelist valid ones.</p>

<h3>Q&amp;A</h3>

<p>Q: Sharded transactions?
A: They are isolated, so no cross-shard transactions.</p>

<p>Q: Microservices?
A: Seems to be an overcompensation.</p>

<p>Q: How to handle pod deployments?
A: Deploying all at once works for now, but would like to make them independent in future.</p>

<p>Q: Kubernetes?
A: No.</p>

    </article>
  </body>
</html>
